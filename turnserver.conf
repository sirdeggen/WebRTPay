# Coturn TURN Server Configuration
# For local development and testing

# Listening IP address
# Use 0.0.0.0 to listen on all interfaces
listening-ip=0.0.0.0

# External IP address (public IP for NAT)
# For local testing, use your local IP or leave commented
# external-ip=YOUR_PUBLIC_IP

# Listening ports
listening-port=3478
tls-listening-port=5349

# Relay ports range (for UDP relay)
min-port=49152
max-port=49200

# Enable verbose logging (useful for debugging)
verbose

# Realm for authentication
realm=webrtpay.local

# Authentication
# Username: testuser
# Password: testpass
# Generate with: turnadmin -k -u testuser -r webrtpay.local -p testpass
user=testuser:testpass

# Long-term credential mechanism
lt-cred-mech

# No multicast relay
no-multicast-peers

# Disable TCP relay (UDP only for development)
# Comment out to enable TCP relay
no-tcp-relay

# Enable STUN
# TURN server also acts as STUN server
stun-only=false

# Disable TLS and DTLS (for local development only!)
# For production, enable TLS with proper certificates
no-tls
no-dtls

# Log file (optional, comment out to use stdout)
# log-file=/var/log/turnserver.log

# Simple log format
simple-log

# Allow loopback peers (for local testing)
allow-loopback-peers

# No TLS for simplicity in dev
# For production:
# cert=/path/to/cert.pem
# pkey=/path/to/privkey.pem

# Fingerprint in TURN messages
fingerprint

# Mobility with ICE
mobility

# CLI access
cli-port=5766
cli-password=admin

# Database for long-term credentials (optional)
# For production, use Redis or PostgreSQL
# userdb=/var/lib/turn/turndb

# Denial of Service protection
# Max allocations per user
max-bps=0
bps-capacity=0

# Prometheus metrics (optional)
# prometheus
# prometheus-port=9641

# Anonymous access (disable for production)
# no-auth

# Static auth secret (alternative to user/pass)
# use-auth-secret
# static-auth-secret=your-secret-key

# Additional allowed peers (optional)
# denied-peer-ip=0.0.0.0-0.255.255.255
# denied-peer-ip=10.0.0.0-10.255.255.255
# denied-peer-ip=172.16.0.0-172.31.255.255
# denied-peer-ip=192.168.0.0-192.168.255.255

# For local testing, allow all peers
# Comment these out for production
no-tcp-relay
allow-loopback-peers
